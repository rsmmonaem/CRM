import{_ as F}from"./ModernLayout-D9DXIkhM.js";import{u as O,y as P,g as n,o as d,b as e,t as l,e as T,k as b,i as c,s as _,d as r,n as x,x as M,F as h,p as C,z as I,m as y,j as Y,a as j,h as G,w as U,c as L,f,l as J,q as K}from"./app-BUyjcrvD.js";import{_ as Q}from"./CallModal-BvNr0D6w.js";import{_ as R}from"./NewLeadModal-CKKRMFKk.js";import"./ApplicationLogo-ftX1K-R9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"fixed inset-0 z-50 overflow-y-auto"},X={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Z={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},ee={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},te={class:"sm:flex sm:items-start mb-6"},se={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},re={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},de={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},le={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ne={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ie={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ue=["value"],me={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ge=["value"],ce={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},xe=["value"],be={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ye={class:"flex justify-end space-x-3 pt-4"},ke=["disabled"],fe={__name:"EditLeadModal",props:{lead:Object,services:Array,statuses:Array,users:Array},emits:["close"],setup(u,{emit:$}){const v=u,k=$,t=O({name:"",phone:"",email:"",company_name:"",location:"",service_id:"",status_id:"",assigned_user_id:""});P(()=>v.lead,m=>{m&&(t.name=m.name||"",t.phone=m.phone||"",t.email=m.email||"",t.company_name=m.company_name||"",t.location=m.location||"",t.service_id=m.service_id||"",t.status_id=m.status_id||"",t.assigned_user_id=m.assigned_user_id||"")},{immediate:!0});const w=()=>{t.put(route("leads.update",v.lead.id),{onSuccess:()=>{k("close"),t.reset()},onError:m=>{}})};return(m,s)=>(d(),n("div",W,[e("div",X,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-75",onClick:s[0]||(s[0]=a=>k("close"))}),e("div",Z,[e("div",ee,[e("div",te,[s[11]||(s[11]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",se,[e("h3",re," Edit Lead: "+l(u.lead?.name||"Loading..."),1),s[10]||(s[10]=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Update lead information and details ")],-1))])]),e("form",{onSubmit:T(w,["prevent"]),class:"space-y-4"},[e("div",oe,[e("div",null,[s[12]||(s[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name (Optional) ",-1)),b(e("input",{type:"text",id:"name","onUpdate:modelValue":s[1]||(s[1]=a=>r(t).name=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.name}]),placeholder:"Enter lead name"},null,2),[[_,r(t).name]]),r(t).errors.name?(d(),n("div",ae,l(r(t).errors.name),1)):c("",!0)]),e("div",null,[s[13]||(s[13]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Phone Number ",-1)),b(e("input",{type:"tel",id:"phone","onUpdate:modelValue":s[2]||(s[2]=a=>r(t).phone=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.phone}]),placeholder:"Enter phone number",required:""},null,2),[[_,r(t).phone]]),r(t).errors.phone?(d(),n("div",de,l(r(t).errors.phone),1)):c("",!0)]),e("div",null,[s[14]||(s[14]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email * ",-1)),b(e("input",{type:"email",id:"email","onUpdate:modelValue":s[3]||(s[3]=a=>r(t).email=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.email}]),placeholder:"Enter email address",required:""},null,2),[[_,r(t).email]]),r(t).errors.email?(d(),n("div",le,l(r(t).errors.email),1)):c("",!0)]),e("div",null,[s[15]||(s[15]=e("label",{for:"company_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Company Name ",-1)),b(e("input",{type:"text",id:"company_name","onUpdate:modelValue":s[4]||(s[4]=a=>r(t).company_name=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.company_name}]),placeholder:"Enter company name"},null,2),[[_,r(t).company_name]]),r(t).errors.company_name?(d(),n("div",ne,l(r(t).errors.company_name),1)):c("",!0)]),e("div",null,[s[16]||(s[16]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Location (Optional) ",-1)),b(e("input",{type:"text",id:"location","onUpdate:modelValue":s[5]||(s[5]=a=>r(t).location=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.location}]),placeholder:"Enter location"},null,2),[[_,r(t).location]]),r(t).errors.location?(d(),n("div",ie,l(r(t).errors.location),1)):c("",!0)]),e("div",null,[s[18]||(s[18]=e("label",{for:"service_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Service * ",-1)),b(e("select",{id:"service_id","onUpdate:modelValue":s[6]||(s[6]=a=>r(t).service_id=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.service_id}]),required:""},[s[17]||(s[17]=e("option",{value:""},"Select a service",-1)),(d(!0),n(h,null,C(u.services,a=>(d(),n("option",{key:a.id,value:a.id},l(a.name),9,ue))),128))],2),[[M,r(t).service_id]]),r(t).errors.service_id?(d(),n("div",me,l(r(t).errors.service_id),1)):c("",!0)]),e("div",null,[s[20]||(s[20]=e("label",{for:"status_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Status * ",-1)),b(e("select",{id:"status_id","onUpdate:modelValue":s[7]||(s[7]=a=>r(t).status_id=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.status_id}]),required:""},[s[19]||(s[19]=e("option",{value:""},"Select a status",-1)),(d(!0),n(h,null,C(u.statuses,a=>(d(),n("option",{key:a.id,value:a.id},l(a.name),9,ge))),128))],2),[[M,r(t).status_id]]),r(t).errors.status_id?(d(),n("div",ce,l(r(t).errors.status_id),1)):c("",!0)]),e("div",null,[s[22]||(s[22]=e("label",{for:"assigned_user_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Assigned User * ",-1)),b(e("select",{id:"assigned_user_id","onUpdate:modelValue":s[8]||(s[8]=a=>r(t).assigned_user_id=a),class:x(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":r(t).errors.assigned_user_id}]),required:""},[s[21]||(s[21]=e("option",{value:""},"Select a user",-1)),(d(!0),n(h,null,C(u.users,a=>(d(),n("option",{key:a.id,value:a.id},l(a.name),9,xe))),128))],2),[[M,r(t).assigned_user_id]]),r(t).errors.assigned_user_id?(d(),n("div",be,l(r(t).errors.assigned_user_id),1)):c("",!0)])]),e("div",ye,[e("button",{type:"button",onClick:s[9]||(s[9]=a=>k("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"submit",disabled:r(t).processing,class:"px-4 py-2 text-sm font-medium text-white bg-yellow-600 border border-transparent rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50"},l(r(t).processing?"Updating...":"Update Lead"),9,ke)])],32)])])])]))}},ve={class:"mb-8"},pe={class:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl p-8 text-white shadow-xl"},he={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},we={class:"dark:bg-gray-800 rounded-xl shadow-lg p-6"},_e={class:"flex items-center justify-between mb-6"},Ce={class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full"},$e={key:0,class:"text-center py-12"},Me={class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},je={class:"flex justify-between items-start mb-2"},Le={class:"text-lg font-semibold text-gray-800 dark:text-white truncate"},Se={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-300 mb-2"},Ee={class:"truncate"},Ue={class:"truncate"},Ve={class:"truncate"},Ae={class:"truncate"},Ne={class:"truncate"},Be={class:"truncate"},qe={key:0,class:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-xs text-gray-500 dark:text-gray-300"},De={class:"flex-shrink-0 text-gray-500 dark:text-gray-400"},He={class:"flex-1 text-gray-700 dark:text-gray-200 truncate"},ze={key:0,class:"text-right text-gray-400 dark:text-gray-500 text-xs"},Fe={class:"mt-3 flex flex-wrap gap-2"},Oe=["onClick"],Pe=["onClick"],Te=["onClick"],We={__name:"Index",props:{leads:Array,user:Object,services:Array,statuses:Array,users:Array},setup(u){const $=I(),v=y(!1),k=y(null),t=y(!1),w=y(null),m=y(!1),s=y(new Set);y(new Set);const a=y(new Set),S=Y(()=>$.props.auth.user),V=(g,o)=>S.value?.is_admin?!0:S.value?.permissions?.[g]?.includes(o)||!1,A=g=>{k.value=g,v.value=!0,s.value.add(g.id),setTimeout(()=>{s.value.delete(g.id)},3e3)},N=()=>{v.value=!1,k.value=null},B=g=>{w.value=g,t.value=!0,a.value.add(g.id),setTimeout(()=>{a.value.delete(g.id)},3e3)},q=()=>{t.value=!1,w.value=null},D=g=>{confirm("Are you sure you want to delete this lead?")&&K.delete(route("leads.destroy",g.id))},E=()=>{m.value=!0},H=()=>{m.value=!1},z=g=>{const o=(g||"").toLowerCase();return o.includes("won")||o.includes("success")?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":o.includes("lost")||o.includes("cancel")?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":o.includes("contact")?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":o.includes("negotiation")||o.includes("deal")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":o.includes("proposal")?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":o.includes("qualified")?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200":o.includes("new")||o.includes("open")?"bg-sky-100 text-sky-800 dark:bg-sky-900 dark:text-sky-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return(g,o)=>(d(),n(h,null,[j(r(G),{title:"Leads"}),j(F,null,{default:U(()=>[e("div",ve,[e("div",pe,[e("div",he,[o[1]||(o[1]=e("div",null,[e("h1",{class:"text-3xl md:text-4xl font-bold mb-2"},"Leads Management"),e("p",{class:"text-blue-100 text-lg"},"Manage and track your leads efficiently")],-1)),V("leads","create")?(d(),n("button",{key:0,onClick:E,class:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition-all duration-200 flex items-center justify-center space-x-2"},[...o[0]||(o[0]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"Add New Lead",-1)])])):c("",!0)])])]),e("div",we,[e("div",_e,[o[2]||(o[2]=e("h3",{class:"text-xl font-semibold text-gray-800 dark:text-white flex items-center space-x-2"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",null,"All Leads")],-1)),e("span",Ce,l(u.leads.length)+" total",1)]),u.leads.length===0?(d(),n("div",$e,[o[3]||(o[3]=e("div",{class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),o[4]||(o[4]=e("p",{class:"text-gray-500 dark:text-gray-400 text-lg"},"No leads found.",-1)),e("button",{onClick:E,class:"mt-4 inline-block bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition-all duration-200"}," Create Your First Lead ")])):c("",!0),e("div",Me,[(d(!0),n(h,null,C(u.leads,i=>(d(),n("div",{key:i.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-xl dark:hover:shadow-white/20 border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-white/30 transition-all duration-300 p-4 flex flex-col justify-between"},[e("div",je,[e("h4",Le,l(i.name||"Unnamed Lead"),1),e("span",{class:x(["text-xs font-semibold px-2 py-1 rounded-full",z(i.status.name)])},l(i.status.name),3)]),e("div",Se,[e("div",Ee,[o[5]||(o[5]=e("strong",null,"Phone:",-1)),f(" "+l(i.phone||"-"),1)]),e("div",Ue,[o[6]||(o[6]=e("strong",null,"Email:",-1)),f(" "+l(i.email||"-"),1)]),e("div",Ve,[o[7]||(o[7]=e("strong",null,"Company:",-1)),f(" "+l(i.company_name||"-"),1)]),e("div",Ae,[o[8]||(o[8]=e("strong",null,"Service:",-1)),f(" "+l(i.service.name||"-"),1)]),e("div",Ne,[o[9]||(o[9]=e("strong",null,"Assigned:",-1)),f(" "+l(i.assigned_user.name||"-"),1)]),e("div",Be,[o[10]||(o[10]=e("strong",null,"Created:",-1)),f(" "+l(new Date(i.created_at).toLocaleDateString()),1)])]),i.lead_details.length>0?(d(),n("div",qe,[o[11]||(o[11]=e("div",{class:"mb-1 font-semibold text-gray-700 dark:text-gray-200"},"Last Call",-1)),(d(!0),n(h,null,C(i.lead_details.slice(0,1),(p,Ie)=>(d(),n("div",{key:p.id,class:"flex justify-between items-start gap-2"},[e("div",De,l(new Date(p.created_at).toLocaleDateString()),1),e("div",He,l(p.call_followup_summary||"-"),1)]))),128)),i.lead_details.length>1?(d(),n("div",ze,"+"+l(i.lead_details.length-1)+" more",1)):c("",!0)])):c("",!0),e("div",Fe,[e("button",{onClick:p=>A(i),class:"flex-1 bg-blue-500 hover:bg-blue-600 dark:hover:bg-blue-400 text-white font-semibold py-2 px-2 rounded text-xs transition-all duration-200 hover:scale-105 hover:shadow-lg"},"Call",8,Oe),j(r(J),{href:g.route("leads.show",i.id),class:"flex-1 bg-green-500 hover:bg-green-600 dark:hover:bg-green-400 text-white font-semibold py-2 px-2 rounded text-xs text-center transition-all duration-200 hover:scale-105 hover:shadow-lg"},{default:U(()=>[...o[12]||(o[12]=[f("View",-1)])]),_:1},8,["href"]),e("button",{onClick:p=>B(i),class:"flex-1 bg-yellow-500 hover:bg-yellow-600 dark:hover:bg-yellow-400 text-white font-semibold py-2 px-2 rounded text-xs transition-all duration-200 hover:scale-105 hover:shadow-lg"},"Edit",8,Pe),e("button",{onClick:p=>D(i),class:"flex-1 bg-red-500 hover:bg-red-600 dark:hover:bg-red-400 text-white font-semibold py-2 px-2 rounded text-xs transition-all duration-200 hover:scale-105 hover:shadow-lg"},"Delete",8,Te)])]))),128))])]),v.value?(d(),L(Q,{key:0,lead:k.value,statuses:u.statuses,onClose:N},null,8,["lead","statuses"])):c("",!0),m.value?(d(),L(R,{key:1,show:m.value,services:u.services,statuses:u.statuses,users:u.users,onClose:H},null,8,["show","services","statuses","users"])):c("",!0),t.value?(d(),L(fe,{key:2,lead:w.value,services:u.services,statuses:u.statuses,users:u.users,onClose:q},null,8,["lead","services","statuses","users"])):c("",!0)]),_:1})],64))}};export{We as default};
