import{u as X,y as Z,g as i,o as a,b as e,t as o,e as I,k as v,i as x,s as M,d as n,n as h,x as $,F as w,p as C,z as ee,m as p,j as F,a as D,h as te,w as O,c as N,f as y,l as se,q as re}from"./app-CLSGPmsT.js";import{_ as oe}from"./ModernLayout-CQ1n9f9U.js";import{_ as le}from"./CallModal-CDF3Wr3l.js";import{_ as ae}from"./NewLeadModal-D4Auy8sx.js";import"./ApplicationLogo-D46PdCfa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"fixed inset-0 z-50 overflow-y-auto"},ne={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ie={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},ue={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ge={class:"sm:flex sm:items-start mb-6"},me={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},xe={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},be={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ve={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ye={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ke={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},fe={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},pe=["value"],he={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},we=["value"],_e={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Ce=["value"],Se={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Me={class:"flex justify-end space-x-3 pt-4"},$e=["disabled"],je={__name:"EditLeadModal",props:{lead:Object,services:Array,statuses:Array,users:Array},emits:["close"],setup(m,{emit:k}){const L=m,S=k,r=X({name:"",phone:"",email:"",company_name:"",location:"",service_id:"",status_id:"",assigned_user_id:""});Z(()=>L.lead,b=>{b&&(r.name=b.name||"",r.phone=b.phone||"",r.email=b.email||"",r.company_name=b.company_name||"",r.location=b.location||"",r.service_id=b.service_id||"",r.status_id=b.status_id||"",r.assigned_user_id=b.assigned_user_id||"")},{immediate:!0});const j=()=>{r.put(route("leads.update",L.lead.id),{onSuccess:()=>{S("close"),r.reset()},onError:b=>{}})};return(b,l)=>(a(),i("div",de,[e("div",ne,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-75",onClick:l[0]||(l[0]=g=>S("close"))}),e("div",ie,[e("div",ue,[e("div",ge,[l[11]||(l[11]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",me,[e("h3",xe," Edit Lead: "+o(m.lead?.name||"Loading..."),1),l[10]||(l[10]=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Update lead information and details ")],-1))])]),e("form",{onSubmit:I(j,["prevent"]),class:"space-y-4"},[e("div",ce,[e("div",null,[l[12]||(l[12]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name (Optional) ",-1)),v(e("input",{type:"text",id:"name","onUpdate:modelValue":l[1]||(l[1]=g=>n(r).name=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.name}]),placeholder:"Enter lead name"},null,2),[[M,n(r).name]]),n(r).errors.name?(a(),i("div",be,o(n(r).errors.name),1)):x("",!0)]),e("div",null,[l[13]||(l[13]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Phone Number ",-1)),v(e("input",{type:"tel",id:"phone","onUpdate:modelValue":l[2]||(l[2]=g=>n(r).phone=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.phone}]),placeholder:"Enter phone number",required:""},null,2),[[M,n(r).phone]]),n(r).errors.phone?(a(),i("div",ve,o(n(r).errors.phone),1)):x("",!0)]),e("div",null,[l[14]||(l[14]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email * ",-1)),v(e("input",{type:"email",id:"email","onUpdate:modelValue":l[3]||(l[3]=g=>n(r).email=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.email}]),placeholder:"Enter email address",required:""},null,2),[[M,n(r).email]]),n(r).errors.email?(a(),i("div",ye,o(n(r).errors.email),1)):x("",!0)]),e("div",null,[l[15]||(l[15]=e("label",{for:"company_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Company Name ",-1)),v(e("input",{type:"text",id:"company_name","onUpdate:modelValue":l[4]||(l[4]=g=>n(r).company_name=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.company_name}]),placeholder:"Enter company name"},null,2),[[M,n(r).company_name]]),n(r).errors.company_name?(a(),i("div",ke,o(n(r).errors.company_name),1)):x("",!0)]),e("div",null,[l[16]||(l[16]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Location (Optional) ",-1)),v(e("input",{type:"text",id:"location","onUpdate:modelValue":l[5]||(l[5]=g=>n(r).location=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.location}]),placeholder:"Enter location"},null,2),[[M,n(r).location]]),n(r).errors.location?(a(),i("div",fe,o(n(r).errors.location),1)):x("",!0)]),e("div",null,[l[18]||(l[18]=e("label",{for:"service_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Service * ",-1)),v(e("select",{id:"service_id","onUpdate:modelValue":l[6]||(l[6]=g=>n(r).service_id=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.service_id}]),required:""},[l[17]||(l[17]=e("option",{value:""},"Select a service",-1)),(a(!0),i(w,null,C(m.services,g=>(a(),i("option",{key:g.id,value:g.id},o(g.name),9,pe))),128))],2),[[$,n(r).service_id]]),n(r).errors.service_id?(a(),i("div",he,o(n(r).errors.service_id),1)):x("",!0)]),e("div",null,[l[20]||(l[20]=e("label",{for:"status_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Status * ",-1)),v(e("select",{id:"status_id","onUpdate:modelValue":l[7]||(l[7]=g=>n(r).status_id=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.status_id}]),required:""},[l[19]||(l[19]=e("option",{value:""},"Select a status",-1)),(a(!0),i(w,null,C(m.statuses,g=>(a(),i("option",{key:g.id,value:g.id},o(g.name),9,we))),128))],2),[[$,n(r).status_id]]),n(r).errors.status_id?(a(),i("div",_e,o(n(r).errors.status_id),1)):x("",!0)]),e("div",null,[l[22]||(l[22]=e("label",{for:"assigned_user_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Assigned User * ",-1)),v(e("select",{id:"assigned_user_id","onUpdate:modelValue":l[8]||(l[8]=g=>n(r).assigned_user_id=g),class:h(["mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",{"border-red-500":n(r).errors.assigned_user_id}]),required:""},[l[21]||(l[21]=e("option",{value:""},"Select a user",-1)),(a(!0),i(w,null,C(m.users,g=>(a(),i("option",{key:g.id,value:g.id},o(g.name),9,Ce))),128))],2),[[$,n(r).assigned_user_id]]),n(r).errors.assigned_user_id?(a(),i("div",Se,o(n(r).errors.assigned_user_id),1)):x("",!0)])]),e("div",Me,[e("button",{type:"button",onClick:l[9]||(l[9]=g=>S("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{type:"submit",disabled:n(r).processing,class:"px-4 py-2 text-sm font-medium text-white bg-yellow-600 border border-transparent rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50"},o(n(r).processing?"Updating...":"Update Lead"),9,$e)])],32)])])])]))}},Ue={class:"mb-8"},Le={class:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-xl p-8 text-white shadow-xl"},Ae={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},Fe={class:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-600"},Ve={class:"flex items-center justify-between mb-4"},De={class:"flex items-center space-x-3"},Ne={key:0,class:"text-sm text-indigo-600 dark:text-indigo-400 font-medium"},Te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4"},Be={value:""},Ee=["value"],Oe={value:""},He=["value"],qe={key:0},ze={value:""},Pe=["value"],Ye={key:0,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600"},Ge={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Je={class:"text-center"},Ke={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Qe={class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},Re={class:"text-center"},We={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Xe={class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},Ze={class:"text-center"},Ie={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},et={class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},tt={key:1,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600"},st={class:"flex flex-wrap gap-2"},rt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},ot={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},lt={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},at={key:3,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"},dt={key:4,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},nt={class:"dark:bg-gray-800 rounded-xl shadow-lg p-6"},it={class:"flex items-center justify-between mb-6"},ut={class:"text-xl font-semibold text-gray-800 dark:text-white flex items-center space-x-2"},gt={class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full"},mt={key:0,class:"text-center py-12"},xt={class:"text-gray-500 dark:text-gray-400 text-lg"},ct={class:"mt-4 space-x-3"},bt={class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},vt={class:"flex justify-between items-start mb-2"},yt={class:"text-lg font-semibold text-gray-800 dark:text-white truncate"},kt={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-300 mb-2"},ft={class:"truncate"},pt={class:"truncate"},ht={class:"truncate"},wt={class:"truncate"},_t={class:"truncate"},Ct={class:"truncate"},St={key:0,class:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600 text-xs text-gray-500 dark:text-gray-300"},Mt={class:"flex-shrink-0 text-gray-500 dark:text-gray-400"},$t={class:"flex-1 text-gray-700 dark:text-gray-200 truncate"},jt={key:0,class:"text-right text-gray-400 dark:text-gray-500 text-xs"},Ut={class:"mt-3 flex flex-wrap gap-2"},Lt=["onClick"],At=["onClick"],Ft=["onClick"],Ot={__name:"Index",props:{leads:Array,user:Object,services:Array,statuses:Array,users:Array},setup(m){const k=m,L=ee(),S=p(!1),r=p(null),j=p(!1),b=p(null),l=p(!1),g=p(new Set);p(new Set);const T=p(new Set),u=p({service:"",status:"",dateFrom:"",dateTo:"",user:""}),U=F(()=>L.props.auth.user),H=(d,t)=>U.value?.is_admin?!0:U.value?.permissions?.[d]?.includes(t)||!1,A=F(()=>{let d=[...k.leads];if(u.value.service&&(d=d.filter(t=>t.service_id==u.value.service)),u.value.status&&(d=d.filter(t=>t.status_id==u.value.status)),u.value.dateFrom){const t=new Date(u.value.dateFrom);d=d.filter(s=>new Date(s.created_at)>=t)}if(u.value.dateTo){const t=new Date(u.value.dateTo);t.setHours(23,59,59,999),d=d.filter(s=>new Date(s.created_at)<=t)}return u.value.user&&U.value?.is_admin&&(d=d.filter(t=>t.assigned_user_id==u.value.user)),d}),_=F(()=>u.value.service||u.value.status||u.value.dateFrom||u.value.dateTo||u.value.user),B=()=>{u.value={service:"",status:"",dateFrom:"",dateTo:"",user:""}},f=F(()=>{const d={byService:{},byStatus:{},byUser:{}};return k.leads.forEach(t=>{const s=t.service?.name||"Unknown";d.byService[s]=(d.byService[s]||0)+1;const c=t.status?.name||"Unknown";d.byStatus[c]=(d.byStatus[c]||0)+1;const V=t.assigned_user?.name||"Unassigned";d.byUser[V]=(d.byUser[V]||0)+1}),d}),q=d=>d?k.leads.filter(t=>t.service_id==d).length:k.leads.length,z=d=>d?k.leads.filter(t=>t.status_id==d).length:k.leads.length,P=d=>d?k.leads.filter(t=>t.assigned_user_id==d).length:k.leads.length,Y=d=>{r.value=d,S.value=!0,g.value.add(d.id),setTimeout(()=>{g.value.delete(d.id)},3e3)},G=()=>{S.value=!1,r.value=null},J=d=>{b.value=d,j.value=!0,T.value.add(d.id),setTimeout(()=>{T.value.delete(d.id)},3e3)},K=()=>{j.value=!1,b.value=null},Q=d=>{confirm("Are you sure you want to delete this lead?")&&re.delete(route("leads.destroy",d.id))},E=()=>{l.value=!0},R=()=>{l.value=!1},W=d=>{const t=(d||"").toLowerCase();return t.includes("won")||t.includes("success")?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.includes("lost")||t.includes("cancel")?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":t.includes("contact")?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":t.includes("negotiation")||t.includes("deal")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":t.includes("proposal")?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":t.includes("qualified")?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200":t.includes("new")||t.includes("open")?"bg-sky-100 text-sky-800 dark:bg-sky-900 dark:text-sky-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return(d,t)=>(a(),i(w,null,[D(n(te),{title:"Leads"}),D(oe,null,{default:O(()=>[e("div",Ue,[e("div",Le,[e("div",Ae,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-3xl md:text-4xl font-bold mb-2"},"Leads Management"),e("p",{class:"text-blue-100 text-lg"},"Manage and track your leads efficiently")],-1)),H("leads","create")?(a(),i("button",{key:0,onClick:E,class:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition-all duration-200 flex items-center justify-center space-x-2"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"Add New Lead",-1)])])):x("",!0)])])]),e("div",Fe,[e("div",Ve,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})]),e("span",null,"Filters")],-1)),e("div",De,[_.value?(a(),i("span",Ne,o(A.value.length)+" of "+o(m.leads.length)+" leads ",1)):x("",!0),_.value?(a(),i("button",{key:1,onClick:B,class:"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-medium flex items-center space-x-1"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),e("span",null,"Clear All",-1)])])):x("",!0)])]),e("div",Te,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Service ",-1)),v(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value.service=s),class:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},[e("option",Be,"All Services ("+o(m.leads.length)+")",1),(a(!0),i(w,null,C(m.services,s=>(a(),i("option",{key:s.id,value:s.id},o(s.name)+" ("+o(q(s.id))+") ",9,Ee))),128))],512),[[$,u.value.service]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Status ",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value.status=s),class:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},[e("option",Oe,"All Statuses ("+o(m.leads.length)+")",1),(a(!0),i(w,null,C(m.statuses,s=>(a(),i("option",{key:s.id,value:s.id},o(s.name)+" ("+o(z(s.id))+") ",9,He))),128))],512),[[$,u.value.status]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," From Date ",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>u.value.dateFrom=s),class:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[M,u.value.dateFrom]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," To Date ",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>u.value.dateTo=s),class:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[M,u.value.dateTo]])]),U.value?.is_admin?(a(),i("div",qe,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Assigned User ",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value.user=s),class:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"},[e("option",ze,"All Users ("+o(m.leads.length)+")",1),(a(!0),i(w,null,C(m.users,s=>(a(),i("option",{key:s.id,value:s.id},o(s.name)+" ("+o(P(s.id))+") ",9,Pe))),128))],512),[[$,u.value.user]])])):x("",!0)]),!_.value&&m.leads.length>0?(a(),i("div",Ye,[e("div",Ge,[e("div",Je,[e("div",Ke,o(Object.keys(f.value.byService).length),1),t[19]||(t[19]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Services",-1)),e("div",Qe," Top: "+o(Object.entries(f.value.byService).sort((s,c)=>c[1]-s[1])[0]?.[0]||"N/A")+" ("+o(Object.entries(f.value.byService).sort((s,c)=>c[1]-s[1])[0]?.[1]||0)+") ",1)]),e("div",Re,[e("div",We,o(Object.keys(f.value.byStatus).length),1),t[20]||(t[20]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Statuses",-1)),e("div",Xe," Top: "+o(Object.entries(f.value.byStatus).sort((s,c)=>c[1]-s[1])[0]?.[0]||"N/A")+" ("+o(Object.entries(f.value.byStatus).sort((s,c)=>c[1]-s[1])[0]?.[1]||0)+") ",1)]),e("div",Ze,[e("div",Ie,o(Object.keys(f.value.byUser).length),1),t[21]||(t[21]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"Users",-1)),e("div",et," Top: "+o(Object.entries(f.value.byUser).sort((s,c)=>c[1]-s[1])[0]?.[0]||"N/A")+" ("+o(Object.entries(f.value.byUser).sort((s,c)=>c[1]-s[1])[0]?.[1]||0)+") ",1)])])])):x("",!0),_.value?(a(),i("div",tt,[e("div",st,[t[27]||(t[27]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Active filters:",-1)),u.value.service?(a(),i("span",rt,[y(" Service: "+o(m.services.find(s=>s.id==u.value.service)?.name)+" ",1),e("button",{onClick:t[5]||(t[5]=s=>u.value.service=""),class:"ml-1 text-blue-600 hover:text-blue-800"},[...t[22]||(t[22]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):x("",!0),u.value.status?(a(),i("span",ot,[y(" Status: "+o(m.statuses.find(s=>s.id==u.value.status)?.name)+" ",1),e("button",{onClick:t[6]||(t[6]=s=>u.value.status=""),class:"ml-1 text-green-600 hover:text-green-800"},[...t[23]||(t[23]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):x("",!0),u.value.dateFrom?(a(),i("span",lt,[y(" From: "+o(new Date(u.value.dateFrom).toLocaleDateString())+" ",1),e("button",{onClick:t[7]||(t[7]=s=>u.value.dateFrom=""),class:"ml-1 text-purple-600 hover:text-purple-800"},[...t[24]||(t[24]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):x("",!0),u.value.dateTo?(a(),i("span",at,[y(" To: "+o(new Date(u.value.dateTo).toLocaleDateString())+" ",1),e("button",{onClick:t[8]||(t[8]=s=>u.value.dateTo=""),class:"ml-1 text-purple-600 hover:text-purple-800"},[...t[25]||(t[25]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):x("",!0),u.value.user&&U.value?.is_admin?(a(),i("span",dt,[y(" User: "+o(m.users.find(s=>s.id==u.value.user)?.name)+" ",1),e("button",{onClick:t[9]||(t[9]=s=>u.value.user=""),class:"ml-1 text-orange-600 hover:text-orange-800"},[...t[26]||(t[26]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):x("",!0)])])):x("",!0)]),e("div",nt,[e("div",it,[e("h3",ut,[t[28]||(t[28]=e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("span",null,o(_.value?"Filtered Leads":"All Leads"),1)]),e("span",gt,o(_.value?`${A.value.length} of ${m.leads.length}`:`${m.leads.length} total`),1)]),A.value.length===0?(a(),i("div",mt,[t[29]||(t[29]=e("div",{class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("p",xt,o(_.value?"No leads match your filters.":"No leads found."),1),e("div",ct,[_.value?(a(),i("button",{key:0,onClick:B,class:"inline-block bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition-all duration-200"}," Clear Filters ")):x("",!0),m.leads.length===0?(a(),i("button",{key:1,onClick:E,class:"inline-block bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition-all duration-200"}," Create Your First Lead ")):x("",!0)])])):x("",!0),e("div",bt,[(a(!0),i(w,null,C(A.value,s=>(a(),i("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-xl dark:hover:shadow-white/20 border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-white/30 transition-all duration-300 p-4 flex flex-col justify-between"},[e("div",vt,[e("h4",yt,o(s.name||"Unnamed Lead"),1),e("span",{class:h(["text-xs font-semibold px-2 py-1 rounded-full",W(s.status.name)])},o(s.status.name),3)]),e("div",kt,[e("div",ft,[t[30]||(t[30]=e("strong",null,"Phone:",-1)),y(" "+o(s.phone||"-"),1)]),e("div",pt,[t[31]||(t[31]=e("strong",null,"Email:",-1)),y(" "+o(s.email||"-"),1)]),e("div",ht,[t[32]||(t[32]=e("strong",null,"Company:",-1)),y(" "+o(s.company_name||"-"),1)]),e("div",wt,[t[33]||(t[33]=e("strong",null,"Service:",-1)),y(" "+o(s.service.name||"-"),1)]),e("div",_t,[t[34]||(t[34]=e("strong",null,"Assigned:",-1)),y(" "+o(s.assigned_user.name||"-"),1)]),e("div",Ct,[t[35]||(t[35]=e("strong",null,"Created:",-1)),y(" "+o(new Date(s.created_at).toLocaleDateString()),1)])]),s.lead_details.length>0?(a(),i("div",St,[t[36]||(t[36]=e("div",{class:"mb-1 font-semibold text-gray-700 dark:text-gray-200"},"Last Call",-1)),(a(!0),i(w,null,C(s.lead_details.slice(0,1),(c,V)=>(a(),i("div",{key:c.id,class:"flex justify-between items-start gap-2"},[e("div",Mt,o(new Date(c.created_at).toLocaleDateString()),1),e("div",$t,o(c.call_followup_summary||"-"),1)]))),128)),s.lead_details.length>1?(a(),i("div",jt,"+"+o(s.lead_details.length-1)+" more",1)):x("",!0)])):x("",!0),e("div",Ut,[e("button",{onClick:c=>Y(s),class:"flex-1 bg-blue-500 hover:bg-blue-600 dark:hover:bg-blue-400 text-white font-semibold py-2 px-2 rounded text-xs transition-all duration-200 hover:scale-105 hover:shadow-lg"},"Call",8,Lt),D(n(se),{href:d.route("leads.show",s.id),class:"flex-1 bg-green-500 hover:bg-green-600 dark:hover:bg-green-400 text-white font-semibold py-2 px-2 rounded text-xs text-center transition-all duration-200 hover:scale-105 hover:shadow-lg"},{default:O(()=>[...t[37]||(t[37]=[y("View",-1)])]),_:1},8,["href"]),e("button",{onClick:c=>J(s),class:"flex-1 bg-yellow-500 hover:bg-yellow-600 dark:hover:bg-yellow-400 text-white font-semibold py-2 px-2 rounded text-xs transition-all duration-200 hover:scale-105 hover:shadow-lg"},"Edit",8,At),e("button",{onClick:c=>Q(s),class:"flex-1 bg-red-500 hover:bg-red-600 dark:hover:bg-red-400 text-white font-semibold py-2 px-2 rounded text-xs transition-all duration-200 hover:scale-105 hover:shadow-lg"},"Delete",8,Ft)])]))),128))])]),S.value?(a(),N(le,{key:0,lead:r.value,statuses:m.statuses,onClose:G},null,8,["lead","statuses"])):x("",!0),l.value?(a(),N(ae,{key:1,show:l.value,services:m.services,statuses:m.statuses,users:m.users,onClose:R},null,8,["show","services","statuses","users"])):x("",!0),j.value?(a(),N(je,{key:2,lead:b.value,services:m.services,statuses:m.statuses,users:m.users,onClose:K},null,8,["lead","services","statuses","users"])):x("",!0)]),_:1})],64))}};export{Ot as default};
