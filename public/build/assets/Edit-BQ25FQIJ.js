import{z as j,j as c,u as h,y as B,g as t,o as d,a as _,d as r,h as I,w as O,b as e,i as u,t as l,e as U,k as p,n as b,s as f,x as A,F as v,p as P,v as D}from"./app-BUyjcrvD.js";import{_ as R}from"./ModernLayout-D9DXIkhM.js";import"./ApplicationLogo-ftX1K-R9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg"},H={key:1,class:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg"},L={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden mb-6"},T={class:"p-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"mt-1 text-sm text-red-600"},J={key:0,class:"mt-1 text-sm text-red-600"},K={key:0,class:"mt-1 text-sm text-red-600"},Q={class:"md:col-span-2"},W={key:0,class:"mt-1 text-sm text-red-600"},X={class:"mt-6 flex justify-end"},Z=["disabled"],ee={key:0},re={key:1},se={key:2,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},oe={class:"p-6"},te={class:"space-y-6"},de={class:"text-lg font-semibold text-gray-800 dark:text-white mb-4 capitalize"},ae={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},ie=["value"],le={class:"text-sm text-gray-700 dark:text-gray-300 capitalize"},ne={class:"mt-6 flex justify-end"},ue=["disabled"],me={key:0},pe={key:1},ge={key:3,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6"},ye={__name:"Edit",props:{user:Object,permissions:Object},setup(E){const w=E,g=j(),a=c(()=>w.user||{id:null,name:"",email:"",role:"user",permissions:[]}),o=h({name:"",email:"",password:"",password_confirmation:"",role:"user"}),n=h({permissions:[]}),V=c(()=>w.permissions||{}),z=()=>{a.value.id&&(o.name=a.value.name||"",o.email=a.value.email||"",o.role=a.value.role||"user")},M=()=>{if(a.value.permissions&&a.value.permissions.length>0){const m=a.value.permissions.map(s=>s.id);n.permissions=m}else n.permissions=[]};B(()=>a.value,()=>{a.value.id&&(z(),M())},{immediate:!0});const C=()=>{a.value.id&&o.put(route("users.update",a.value.id),{onSuccess:()=>{o.password="",o.password_confirmation=""},onError:m=>console.error("User update errors:",m)})},F=()=>{a.value.id&&n.put(route("users.update",a.value.id),{onSuccess:()=>{},onError:m=>console.error("Permission update errors:",m)})},x=c(()=>g.props.auth?.user||{});c(()=>x.value.is_admin||x.value.permissions?.users?.includes("edit"));const N=c(()=>!!x.value.is_admin);return(m,s)=>(d(),t(v,null,[_(r(I),{title:"Edit User"}),_(R,null,{default:O(()=>[s[15]||(s[15]=e("div",{class:"mb-8"},[e("div",{class:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 rounded-xl p-8 text-white shadow-xl"},[e("h1",{class:"text-4xl font-bold mb-3"},"Edit User"),e("p",{class:"text-purple-100 text-lg"},"Update user information and permissions")])],-1)),r(g).props.flash.success?(d(),t("div",q,l(r(g).props.flash.success),1)):u("",!0),r(g).props.flash.error?(d(),t("div",H,l(r(g).props.flash.error),1)):u("",!0),e("div",L,[s[12]||(s[12]=e("div",{class:"bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-4"},[e("h2",{class:"text-xl font-semibold text-white"},"User Information")],-1)),e("div",T,[e("form",{onSubmit:U(C,["prevent"])},[e("div",Y,[e("div",null,[s[6]||(s[6]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Full Name",-1)),p(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=i=>r(o).name=i),type:"text",class:b(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.name}]),placeholder:"Enter full name"},null,2),[[f,r(o).name]]),r(o).errors.name?(d(),t("div",$,l(r(o).errors.name),1)):u("",!0)]),e("div",null,[s[7]||(s[7]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Email Address",-1)),p(e("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=i=>r(o).email=i),type:"email",class:b(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.email}]),placeholder:"Enter email address"},null,2),[[f,r(o).email]]),r(o).errors.email?(d(),t("div",G,l(r(o).errors.email),1)):u("",!0)]),e("div",null,[s[9]||(s[9]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Role",-1)),p(e("select",{id:"role","onUpdate:modelValue":s[2]||(s[2]=i=>r(o).role=i),class:b(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.role}])},[...s[8]||(s[8]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1)])],2),[[A,r(o).role]]),r(o).errors.role?(d(),t("div",J,l(r(o).errors.role),1)):u("",!0)]),e("div",null,[s[10]||(s[10]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"New Password (Optional)",-1)),p(e("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=i=>r(o).password=i),type:"password",class:b(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.password}]),placeholder:"Enter new password"},null,2),[[f,r(o).password]]),r(o).errors.password?(d(),t("div",K,l(r(o).errors.password),1)):u("",!0)]),e("div",Q,[s[11]||(s[11]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Confirm New Password",-1)),p(e("input",{id:"password_confirmation","onUpdate:modelValue":s[4]||(s[4]=i=>r(o).password_confirmation=i),type:"password",class:b(["w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":r(o).errors.password_confirmation}]),placeholder:"Confirm new password"},null,2),[[f,r(o).password_confirmation]]),r(o).errors.password_confirmation?(d(),t("div",W,l(r(o).errors.password_confirmation),1)):u("",!0)])]),e("div",X,[e("button",{type:"submit",disabled:r(o).processing,class:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[r(o).processing?(d(),t("span",ee,"Updating...")):(d(),t("span",re,"Update User Info"))],8,Z)])],32)])]),N.value?(d(),t("div",se,[s[13]||(s[13]=e("div",{class:"bg-gradient-to-r from-green-500 to-blue-600 px-6 py-4"},[e("h2",{class:"text-xl font-semibold text-white"},"Permissions Management")],-1)),e("div",oe,[e("form",{onSubmit:U(F,["prevent"])},[e("div",te,[(d(!0),t(v,null,P(V.value,(i,k)=>(d(),t("div",{key:k,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-4"},[e("h3",de,l(k)+" Permissions",1),e("div",ae,[(d(!0),t(v,null,P(i,y=>(d(),t("label",{key:y.id,class:"flex items-center space-x-2 cursor-pointer"},[p(e("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=S=>r(n).permissions=S),value:y.id,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,ie),[[D,r(n).permissions]]),e("span",le,l(y.action),1)]))),128))])]))),128))]),e("div",ne,[e("button",{type:"submit",disabled:r(n).processing,class:"bg-gradient-to-r from-green-500 to-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[r(n).processing?(d(),t("span",me,"Updating Permissions...")):(d(),t("span",pe,"Update Permissions"))],8,ue)])],32)])])):(d(),t("div",ge,[...s[14]||(s[14]=[e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-yellow-800"},"Permission Required"),e("div",{class:"mt-2 text-sm text-yellow-700"},[e("p",null,"You need admin privileges to manage user permissions.")])])],-1)])]))]),_:1})],64))}};export{ye as default};
